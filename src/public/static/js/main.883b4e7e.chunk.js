(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,a){e.exports=a(83)},83:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(37),o=a.n(c),s=a(18),u=a(15),l=a(24),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("Action with anecdotes type: ".concat(t.type)),t.type){case"ADD_ANECDOTES":return[].concat(Object(l.a)(e),Object(l.a)(t.anecdotes));case"ADD_ANECDOTE":return[t.anecdote].concat(Object(l.a)(e));default:return e}},d={count:0},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ANECDOTES_COUNT":return Object.assign({},e,{count:t.count});default:return e}},m=Object(s.b)({anecdotes:i,statistic:h}),p=a(2),b=a(3),f=a(5),v=a(4),O=a(6),j=a(21),E=a(17),g=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"container"},r.a.createElement("p",{className:"text-muted"},r.a.createElement("small",null,"Developed by ",r.a.createElement("a",{href:"https://vk.com/ea_korolev",target:"blank"},"ekorolev"))))}}]),t}(r.a.Component),y=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"flex-shrink-0"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"mt-5"},this.props.children,r.a.createElement(g,null))))}}]),t}(r.a.Component),C=a(8),A=a.n(C),N=a(16),k=a(7),x=a(39),w=a.n(x),D=a(40),S=a.n(D),T=(a(55),function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card",style:{whiteSpace:"pre-line"}},r.a.createElement("div",{className:"card-body"},this.props.data.text),r.a.createElement("div",{className:"card-footer text-muted"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},this.props.data.author),r.a.createElement("div",{className:"col-sm text-right"},r.a.createElement(S.a,{format:"LLL",date:this.props.data.createdAt})))))}}]),t}(r.a.Component)),_=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{className:"spinner-grow text-pripary"},r.a.createElement("span",{className:"sr-only"},"Loading")))}}]),t}(r.a.Component),M=a(23),L=a.n(M),z={getAnecdotes:function(){var e=Object(N.a)(A.a.mark(function e(){var t,a,n=arguments;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:10,a=n.length>1&&void 0!==n[1]?n[1]:Date.now(),console.log("pagesize: ".concat(t,", afterDate: ").concat(a)),e.next=5,L.a.get("".concat("/","anecdotes?size=").concat(t,"&before=").concat(a));case 5:return e.abrupt("return",e.sent.data);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getAnecotesCount:function(){var e=Object(N.a)(A.a.mark(function e(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat("/","anecdotes/count"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),createAnecdote:function(){var e=Object(N.a)(A.a.mark(function e(t){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.post("".concat("/","anecdotes/create"),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},F=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).call(this))).state={hasMore:!0},e.loadMore=e.loadMore.bind(Object(k.a)(Object(k.a)(e))),e}return Object(O.a)(t,e),Object(b.a)(t,[{key:"loadMore",value:function(){var e=Object(N.a)(A.a.mark(function e(){var t,a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.anecdotes.length&&(t=this.props.anecdotes[this.props.anecdotes.length-1].createdAt),e.next=3,z.getAnecdotes(void 0,t);case 3:a=e.sent,this.props.addAnecdotes(a.anecdotes),this.state.hasMore=a.anecdotes.length!==a.count;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.anecdotes.map(function(e){return r.a.createElement("li",{key:e._id,className:"p-2 m-2"},r.a.createElement(T,{data:e}))});return r.a.createElement(w.a,{hasMore:this.state.hasMore,loader:r.a.createElement(_,{key:0}),loadMore:this.loadMore},r.a.createElement("ul",{className:"list-unstyled"},e))}}]),t}(r.a.Component),J=function(e){return{type:"ADD_ANECDOTES",anecdotes:e}},U=Object(u.b)(function(e){return{anecdotes:e.anecdotes}},function(e){return{addAnecdotes:function(t){return e(J(t))}}})(F),B=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"my-2"},r.a.createElement("p",null,"\u0412\u0441\u0435\u0433\u043e \u0432 \u0431\u0430\u0437\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0430\u043d\u0435\u043a\u0434\u043e\u0442\u043e\u0432: ",this.props.anecdotes_count),r.a.createElement("p",null,"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0442\u043e\u0433\u043e \u0433\u043b\u044f\u0434\u0438\u0448\u044c \u043d\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u043d\u0430\u044f, \u0441\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u043d\u0435\u0447\u0435\u0433\u043e, \u0442\u0430\u043a \u0447\u0442\u043e \u0432\u0441\u0435 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u043a\u043e\u0434\u044b \u043b\u0435\u0436\u0430\u0442 \u0437\u0434\u0435\u0441\u044c: ",r.a.createElement("a",{href:"https://github.com/ekorolev/anecs-client",target:"blank"},"github.com/ekorolev/anecs-client")," \u0438 \u0437\u0434\u0435\u0441\u044c ",r.a.createElement("a",{href:"https://github.com/ekorolev/anecs-server",target:"blank"},"github.com/ekorolev/anecs-server"))))}},{key:"componentDidMount",value:function(){var e=Object(N.a)(A.a.mark(function e(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.props,e.next=3,z.getAnecotesCount();case 3:e.t1=e.sent,e.t0.setAnecdotesCount.call(e.t0,e.t1);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(r.a.Component),I=Object(u.b)(function(e){return{anecdotes_count:e.statistic.count}},function(e){return{setAnecdotesCount:function(t){return e(function(e){return{type:"SET_ANECDOTES_COUNT",count:e}}(t))}}})(B),q=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).call(this))).state={author:"admin",text:"",secretCode:""},e.handleAuthorChange=e.handleAuthorChange.bind(Object(k.a)(Object(k.a)(e))),e.handleTextChange=e.handleTextChange.bind(Object(k.a)(Object(k.a)(e))),e.handleCodeChange=e.handleCodeChange.bind(Object(k.a)(Object(k.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(k.a)(Object(k.a)(e))),e}return Object(O.a)(t,e),Object(b.a)(t,[{key:"handleAuthorChange",value:function(e){this.setState({author:e.target.value})}},{key:"handleTextChange",value:function(e){this.setState({text:e.target.value})}},{key:"handleCodeChange",value:function(e){this.setState({secretCode:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(N.a)(A.a.mark(function e(t){var a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,z.createAnecdote(this.state);case 3:a=e.sent,this.props.addAnecdote(a.anecdote),this.props.history.push("/");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement("p",{className:"text-center",style:{fontSize:"30px"}},"Create an anecdote"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"authorAnec"},"Author"),r.a.createElement("input",{onChange:this.handleAuthorChange,value:this.state.author,type:"text",className:"form-control",id:"authorAnec"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"codeAnec"},"Secret code"),r.a.createElement("input",{onChange:this.handleCodeChange,value:this.state.secretCode,type:"password",className:"form-control",id:"codeAnec"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"textAnec"},"Anecdote's text"),r.a.createElement("textarea",{value:this.state.text,onChange:this.handleTextChange,className:"form-control",id:"textAnec",rows:"4"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{onClick:this.handleSubmit,className:"btn btn-primary"},"Create")))}}]),t}(r.a.Component),G=Object(u.b)(null,function(e){return{addAnecdote:function(t){return e(function(e){return{type:"ADD_ANECDOTE",anecdote:e}}(t))}}})(q),H=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e;return e="/"===this.props.location.pathname?r.a.createElement(j.b,{to:"/about"},"About"):r.a.createElement(j.b,{to:"/"},"Anecdotes"),r.a.createElement("ul",{className:"nav justify-content-center"},r.a.createElement("li",{className:"nav-item px-2"},e))}}]),t}(r.a.Component),K=Object(E.d)(function(e){return r.a.createElement(H,e)}),P=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement(j.a,null,r.a.createElement(y,null,r.a.createElement("div",{className:"text-center m-3"},r.a.createElement("h1",null,"Anecdotes")),r.a.createElement("div",{className:"container"},r.a.createElement(K,null)),r.a.createElement(E.a,{exact:!0,path:"/",component:U}),r.a.createElement(E.a,{path:"/about",component:I}),r.a.createElement(E.a,{path:"/create",component:G})))}}]),t}(n.Component),Q=Object(u.b)(null,function(e){return{addAnecdotes:function(t){return e(J(t))}}})(P),R=(a(82),Object(s.c)(m));o.a.render(r.a.createElement(u.a,{store:R},r.a.createElement(Q,null)),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.883b4e7e.chunk.js.map